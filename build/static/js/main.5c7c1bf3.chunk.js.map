{"version":3,"sources":["services/contacts.js","components/App.jsx","index.js"],"names":["baseUrl","config","headers","axios","get","then","response","data","newObject","post","id","put","delete","Persons","contacts","delFunc","length","map","contact","key","name","number","style","background","color","onClick","Filter","func","placeholder","onChange","AddContacts","changeFunc","addFunc","type","Notifications","message","messageType","border","fontSize","App","useState","persons","setPersons","newContact","setNewContact","visualData","changeVisualData","notification","setNotification","renderNumbers","incRenderNumbers","delErrorHandler","contactName","addErrorHandler","errorObj","console","log","useEffect","ms","Promise","resolve","setTimeout","contactService","initialContacts","event","inputText","target","value","filteredData","filter","person","toLowerCase","includes","preventDefault","found","forEach","window","confirm","prev","err","a","catch","error","createWithValidation","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.5c7c1bf3.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\nvar config = {headers: {'Content-Type': 'application/json','Cache-Control' : 'no-cache'}};\r\n\r\nconst getContacts = () => {\r\n    const request = axios.get(baseUrl,config)\r\n    return request.then(response => response.data)\r\n\r\n\r\n\r\n}\r\n\r\nconst createNew = (newObject)  => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n    \r\n}\r\n\r\nconst updateExisting = (id,newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n    \r\n}\r\n\r\nconst deleteContact = (id) => {\r\n    return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nexport default \r\n{ \r\n    getContacts,\r\n    createNew, \r\n    updateExisting,\r\n    deleteContact\r\n}","import React, { useState,useEffect} from 'react'\r\nimport contactService from \"../services/contacts\"\r\n\r\n\r\nconst DELETE_EVENT = \"deletionEvent\";\r\nconst UPDATE_EVENT = \"updateEvent\";\r\nconst ADDITION_EVENT = \"addEvent\";\r\nconst DEL_ERROR_EVENT = \"errEvent\";\r\nconst ADD_ERROR_EVENT = \"addErrEvent\"\r\n\r\nconst Persons = ({contacts,delFunc}) => {\r\n\r\n  if(contacts.length > 0)\r\n    {\r\n      return(<div>\r\n        {contacts.map(contact => <p key={contact.id}>{contact.name} {contact.number} <button key={contact.id} style={{background:\"red\",color:\"white\"}} onClick={() => delFunc(contact.id,contact.name)}>Delete</button></p>\r\n        )}\r\n      </div>)\r\n    }\r\n    else\r\n    {\r\n      return(<div></div>)\r\n    }    \r\n\r\n}\r\n\r\nconst Filter = ({func}) => ( \r\n<form>\r\n  <div>\r\n    filter shown with <input id=\"nameFilter\" placeholder=\"Filter text\" onChange={func}/>\r\n  </div>\r\n</form>)\r\n\r\nconst AddContacts = ({changeFunc,addFunc}) => (\r\n\r\n  <form>\r\n    <div>name: <input id=\"nameInput\" placeholder=\"Add name\" onChange={changeFunc}/></div>  \r\n    <div>number: <input id=\"numberInput\" placeholder=\"Add number\" onChange={changeFunc}/></div>  \r\n    <div>\r\n      <button type=\"submit\" onClick={addFunc}>add</button>\r\n    </div>\r\n  </form>\r\n)\r\n\r\nconst Notifications = ({message,messageType}) => {\r\n\r\nswitch (messageType) {\r\n  case ADDITION_EVENT:\r\n    return(<div style={{border: \"2px solid green\",color:\"green\",fontSize:\"14pt\"}}>Added {message}</div>)\r\n  case DELETE_EVENT:\r\n    return(<div style={{border: \"2px solid red\",color:\"red\",fontSize:\"14pt\"}}>Contact {message} has been removed</div>)\r\n  case UPDATE_EVENT:\r\n    return(<div style={{border: \"2px solid blue\",color:\"blue\",fontSize:\"14pt\"}}>Number for contact {message} has been updated</div>)\r\n  case DEL_ERROR_EVENT:\r\n    return(<div style={{border: \"3px dashed red\",color:\"red\",fontSize:\"14pt\"}}>Contact {message} has been already been removed from server</div>)\r\n  case ADD_ERROR_EVENT:\r\n    return(<div style={{border: \"3px inset red\",color:\"red\",fontSize:\"14pt\"}}>{message}</div>)\r\n  default:\r\n    return(<div>\r\n      \r\n    </div>)\r\n}\r\n\r\n\r\n}\r\n\r\n\r\nconst App = () => {\r\n \r\n  const [ persons, setPersons] = useState([])\r\n  const [ newContact, setNewContact ] = useState('')\r\n  const [ visualData, changeVisualData] = useState(persons)\r\n  const [ notification,setNotification] = useState(\"\")\r\n  const [ renderNumbers, incRenderNumbers] = useState(0)\r\n\r\n  const addContact = (event) => {\r\n    event.preventDefault()\r\n    \r\n    let found = false\r\n\r\n    persons.forEach(person => {\r\n      \r\n      if(person.name === newContact.name)\r\n      {\r\n        let res = window.confirm(`${newContact.name} is already added to phonebook.. replace the old number with new one?`)\r\n        // Poistutaan jos cancel tai ruksi\r\n        if(!res){return;}\r\n        \r\n        // Päivitetään numero ja vaihdetaan tila\r\n        contactService\r\n        .updateExisting(person.id,newContact).then(\r\n          setNotification({...notification,\r\n          name: newContact.name,\r\n          type: UPDATE_EVENT\r\n          }))\r\n          .then(incRenderNumbers(prev => prev + 1))\r\n      \r\n          found = true\r\n      }\r\n    })\r\n\r\n    if(!found)\r\n    {\r\n      let err = false;\r\n\r\n      // Luodaaan, mutta peruutetaan ja varoitetaan, jos validointi ei mene läpi\r\n      createWithValidation();\r\n\r\n      async function createWithValidation(){\r\n\r\n        await contactService.createNew(newContact)\r\n        .catch(error => {addErrorHandler(error.response.data)\r\n        err = true})\r\n\r\n        if(!err)\r\n        {\r\n          setNotification({...notification,\r\n          name: newContact.name,\r\n          type: ADDITION_EVENT\r\n          })\r\n          incRenderNumbers(prev => prev + 1)\r\n\r\n        }\r\n      }\r\n    }\r\n        \r\n\r\n    // Nollataan input kentät\r\n    document.getElementById(\"nameInput\").value = null;\r\n    document.getElementById(\"numberInput\").value = null;\r\n  }\r\n  const removeContact = (id,name) => {\r\n\r\n\r\n    let res = window.confirm(`Do you want to delete contact: ${name}?`)\r\n    \r\n    // Poistutaan jos cancel tai ruksi\r\n    if(!res){return;}\r\n    \r\n    \r\n    // Poistetaan ja vaihdetaan tila\r\n    contactService\r\n    .deleteContact(id)\r\n    .then(\r\n        setNotification({...notification,\r\n          name: name,\r\n          type: DELETE_EVENT\r\n          })\r\n      ).catch(() => delErrorHandler(name))\r\n      .then(incRenderNumbers(prev => prev + 1))\r\n  }\r\n\r\n  const delErrorHandler = (contactName) => {\r\n\r\n    setNotification({...notification,\r\n      name: contactName,\r\n      type: DEL_ERROR_EVENT\r\n      })\r\n  }\r\n\r\n  const addErrorHandler = (errorObj) => {\r\n\r\n    console.log(errorObj)\r\n    setNotification({...notification,\r\n      name: errorObj[\"error\"],\r\n      type: ADD_ERROR_EVENT,\r\n      })\r\n\r\n  }\r\n\r\n  const handleChange = (event) => {\r\n    if(event.target.id === \"nameInput\")\r\n    {\r\n      setNewContact({...newContact, name: event.target.value})\r\n    }\r\n    else if(event.target.id === \"numberInput\")\r\n    {\r\n      setNewContact({...newContact, number: event.target.value})\r\n    }\r\n  }\r\n\r\n  const filterContacts = (event) => {\r\n\r\n    let inputText = event.target.value;\r\n    \r\n    // Jos kenttään on syötetty tietoa\r\n    if(inputText)\r\n    {\r\n      let filteredData = persons.filter(person => person.name.toLowerCase().includes(inputText.toLowerCase()))\r\n      changeVisualData(filteredData)\r\n    }\r\n    else\r\n    {\r\n      changeVisualData(persons)\r\n    }\r\n  }\r\n\r\n  \r\n  // Kontaktitietojen haku tietokannasta ja numeroiden päivitys\r\n  useEffect(() => {\r\n\r\n    const wait = ms => new Promise(resolve => setTimeout(resolve, ms));\r\n\r\n      // Lisästään 1 sek delay.. hakee välillä vanhaa dataa\r\n      wait(1000)\r\n      .then(() => {\r\n      contactService\r\n        .getContacts()\r\n          .then(initialContacts => {\r\n            setPersons(initialContacts)\r\n            changeVisualData(initialContacts)\r\n          })})\r\n    \r\n      \r\n  }, [renderNumbers])\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notifications message={notification.name} messageType={notification.type}/>\r\n      <Filter func={filterContacts}/>\r\n      <h2>Add new contact</h2>\r\n      <AddContacts changeFunc={handleChange} addFunc={addContact}/>\r\n      <h2>Numbers</h2>\r\n      <Persons contacts={visualData} delFunc={removeContact}/>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom';\r\nimport App from \"./components/App\"\r\n\r\n\r\n\r\nReactDOM.render(\r\n    <App />, \r\n    document.getElementById('root')\r\n  )"],"sourceRoot":""}